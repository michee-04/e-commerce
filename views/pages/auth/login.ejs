<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon"/>
    <link href="/css/output.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">


    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.js"></script>



    <!-- Google Fonts (Montserrat only) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat&display=swap');

        /* Styles généraux */
        body {
            font-family: 'Montserrat', sans-serif;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            flex-direction: column;
        }

        .opacity {
            background-color: #c0d8d0;
        }

        .btnGreen {
            background-color: #3c7962;
            color: #fefefe;
        }

        .inputField {
            background-color: #77bba2;
            color: #313033;
            border: none;
            border-radius: 9999px; /* rounded-full */
            display: block;
            width: 100%;
            padding: 10px 20px; /* équivalent de py-2.5 px-5 */
        }


        .fillInput {
            background-color: #77bba2;
            color: #313033;
            border: 1px solid gray; /* Garde la bordure grise par défaut */
            outline: none; /* Supprime l'outline par défaut des navigateurs */
        }

        .fillInput:focus {
            border-color: #28a745; /* Change la couleur de la bordure au focus */
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.5); /* Ajoute un focus-ring vert */
        }


        .customGreen {
            color: #c0d8d0;
        }

        .bigGreenText {
            color: #3c7962;
        }

        /* Cacher la barre de défilement pour Chrome, Safari, et Opera */
        .scroll-bar::-webkit-scrollbar {
            display: none;
        }

        /* Cacher la barre de défilement pour IE, Edge et Firefox */
        .scroll-bar {
            -ms-overflow-style: none; /* IE et Edge */
            scrollbar-width: none; /* Firefox */
        }

    </style>
</head>
<body>
    <section class="">
        <div class="absolute inset-0 opacity"></div>
        <div class="relative mx-auto text-center py-10 max-w-xl overflow-auto scroll-bar">
            <section class="mx-auto">
                <div class="flex flex-col items-center justify-center py-8 lg:py-0 sm:py-10 mx-auto px-4">
                    <div class="w-full bg-white rounded-lg shadow dark:border sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700">
                        <div class="p-6 space-y-2 md:space-y-3 sm:p-8">
                            <h1 class="mb-4 text-4xl font-extrabold tracking-tight bigGreenText md:text-5xl">
                                Connexion
                            </h1>
                            <p class="mb-8 text-xs font-normal lg:text-sm bigGreenText">
                                Connecter vous pour continuer.
                            </p>
                            <form method="POST"class="space-y-4 md:space-y-8 pt-8" action="/api/v1/user/login-with-password">
                                <div>
                                    <input 
                                        type="email" 
                                        name="email" 
                                        id="email" 
                                        class="fillInput rounded-full block w-full py-2.5 px-5" 
                                        placeholder="Email" 
                                        required
                                    >
                                </div>
                                <div>
                                    <input 
                                        type="password" 
                                        name="password" 
                                        id="password" 
                                        class="fillInput rounded-full block w-full py-2.5 px-5" 
                                        placeholder="Mot de passe" 
                                        required
                                    >
                                </div>
                                <button 
                                    type="button" 
                                    class="btnGreen uppercase w-full text-white font-bold rounded-full text-sm px-5 py-3 text-center"
                                >
                                    S'inscrire
                                </button>
                                <div class="space-y-2 md:space-y-5">
                                    <p class="text-sm">
                                        <a href="/api/v1/user/forgot-password" class="font-bold bigGreenText hover:underline">
                                            Mot de passe oublié ?
                                        </a>
                                    </p>
                                    <p class="text-sm font-light text-gray-500 dark:text-gray-400">
                                        Vous n’avez pas de compte ? 
                                        <a href="/api/v1/views/register" class="font-bold bigGreenText hover:underline">
                                            Inscrivez-vous
                                        </a>
                                    </p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
            <script>
                document.querySelector('button[type="button"]').addEventListener('click', async () => {
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
            
                    try {
                        const response = await fetch('/api/v1/user/login-with-password', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ email, password }),
                        });
            
                        const result = await response.json();
            
                        if (response.ok) {
                            alert('Connexion réussie !');
                            console.log(result);
                            // Redirigez l'utilisateur ou effectuez une autre action
                        } else {
                            alert(result.error.message || 'Erreur lors de la connexion');
                        }
                    } catch (error) {
                        console.error('Erreur:', error);
                        alert('Une erreur est survenue.');
                    }
                });
            </script>
            
        </div>            
    </section>
</body>
</html>